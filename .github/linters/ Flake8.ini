[flake8]
# === 基础配置 ===
max-line-length = 200 # 放宽行长度限制
exclude =
    .venv,
    __pycache__,
    */migrations/*,
    */legacy/*  # 排除旧代码目录
    */MZAPI/*  # 彻底跳过该库的检查


# === 错误忽略规则 ===
extend-ignore =

    # 格式类错误
    E302,  # 函数/类之间需要2个空行
    E305,  # 类/函数后需要2个空行
    W291,  # 行尾空白
    W292,  # 文件末尾空行
    E302,  # 忽略函数间隔错误
    E501,  # 行长限制
    E305,  # 类/函数后空行不足
    W292   # 文件末尾空

    # 命名规范类错误
    N8,    # 覆盖所有命名规范错误:
           # N801: 类名应使用CapWords
           # N802: 函数名应使用小写下划线
           # N806: 变量名应使用小写下划线
           # N813: 模块名应使用小写下划线

    # 其他特殊规则
    E501,  # 行长度限制
    E266,  # 多个#开头注释
    E402   # 模块级导入不在文件顶部

# === 目录级特殊规则 ===
per-file-ignores =

    # 测试文件特殊规则
    tests/*:
        S101,  # 断言检查
        S311   # 伪随机数警告

    .github/loop_analyzer.py: ALL  # 忽略所有检查
    # 示例文件规则
    examples/*:
        E402,
        F401

# === 复杂度控制 ===
max-complexity = 25  # 函数复杂度阈值
ignore-complexity =
    */utils/*: 30     # 工具类放宽限制